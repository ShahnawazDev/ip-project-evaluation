===============================================================================
               DELHI METRO SIMULATOR - ASSIGNMENT EVALUATION
===============================================================================
Student: Ananya Sen Authi
Roll No: 2025590
Email: ananya25590@iiitd.ac.in
Group: 6
Evaluation Date: December 12, 2025
Total Possible: 100 Regular Marks + 20 Bonus Marks
===============================================================================

CODE EXECUTION STATUS: ⚠ PARTIAL SUCCESS
The code compiles and runs, but contains a critical logic error that breaks
the journey planner functionality completely.

===============================================================================
                        CRITICAL ISSUE IDENTIFIED
===============================================================================

LOCATION: Line 120 in main.py
ISSUE: Logic Error in Journey Planner

Current Code (INCORRECT):
    if starting_line or not ending_line:
        print("Error: Source or Destination station not found.")
        return

Correct Code Should Be:
    if not starting_line or not ending_line:
        print("Error: Source or Destination station not found.")
        return

IMPACT: This bug causes ALL journey planning tests to fail with "Source or 
Destination station not found" error, even when both stations exist in the 
data. The condition evaluates incorrectly, always triggering the error message.

TEST RESULTS:
✗ Test Case 2 (Dwarka → Botanical Garden): FAILED
✗ Test Case 3 (Kirti Nagar → Rajiv Chowk): FAILED
✗ All journey planning functionality: NON-FUNCTIONAL

Note: According to strict evaluation guidelines, "If there is any compilation 
error/code does not run: Zero marks for the entire assignment." However, since
the code technically runs (just has a logic bug), partial marks are awarded
based on what works correctly.

===============================================================================
                        DETAILED EVALUATION BREAKDOWN
===============================================================================

1. DATA COLLECTION (20 marks)
-----------------------------
✓ Blue Line: Complete data from Dwarka Sector 21 to Noida Electronic City
  - All 51 stations included
  - Proper sequence maintained
✓ Magenta Line: Complete data from Janakpuri West to Botanical Garden
  - All 24 stations included
  - Correct route coverage
✓ Station names are accurate and match official DMRC data
✓ Travel times between consecutive stations properly specified
✓ Interchange points correctly identified:
  - Rajiv Chowk (Blue Line)
  - Mandi House (Blue Line)
  - Botanical Garden (Blue/Magenta)
  - Janakpuri West (Blue/Magenta)
  - Hauz Khas (Magenta)
  - Kalkaji Mandir (Magenta)
✓ Clean data file format with proper structure
✓ Data sourced from official DMRC information (documented in README)

Strengths:
- Complete and accurate station data for both required lines
- Well-structured text format
- Proper identification of all interchange stations
- Travel times are realistic and consistent

SCORE: 20/20
Assessment: Excellent data collection with comprehensive and accurate information

MARKS BREAKDOWN:
- Blue Line completeness: 10/10
- Magenta Line completeness: 10/10
- Accuracy and formatting: Full marks


2. SCHEDULE LOGIC (30 marks)
----------------------------
✓ Service hours correctly implemented (06:00 AM - 11:00 PM)
  - Hardcoded boundaries: 360 to 1380 minutes
  - Proper validation in calculate_next_metro_time()
✓ Peak hours logic working correctly
  - Morning peak: 8-10 AM → 4 min frequency
  - Evening peak: 5-7 PM → 4 min frequency
  - Condition: (8 <= H < 10) or (17 <= H < 19)
✓ Off-peak hours logic working (8 min frequency)
✓ Time conversion functions implemented:
  - time_to_min(T): Converts HH:MM to minutes
  - min_to_time(total_min): Converts minutes to HH:MM
✓ Next metro calculation works for Test Case 1
  - Input: 09:18, Line: Blue, Station: Rajiv Chowk
  - Output: Next metro at 9:20 ✓
  - Shows subsequent metros: 9:24, 9:28 ✓
✓ Service restriction test working
  - Input: 23:15 (outside service hours)
  - Output: "No service available at 23:15" ✓
✓ First train calculation from 06:00 AM baseline correctly implemented
  - station_travel_time = get_time_from_start(line, station, stations_map)
  - next_metro_time = 360 + station_travel_time
✓ Frequency-based scheduling with while loop to find next train

Issues Identified:
✗ min_to_time() doesn't pad single-digit minutes with leading zero
  - Returns "9:5" instead of "09:05"
  - Returns "9:20" instead of "09:20"
  - Affects output formatting but not functionality (-2 marks)

SCORE: 28/30
Assessment: Schedule logic is well-implemented with only minor formatting issues

MARKS DEDUCTED:
- Time formatting (missing leading zeros): -2 marks


3. JOURNEY PLANNER (25 marks)
-----------------------------
✗ CRITICAL BUG: Logic error on line 120 prevents ANY journey from being planned
✗ Test Case 2 (Interchange journey: Dwarka → Botanical Garden): FAILS
✗ Test Case 3 (Single line journey: Kirti Nagar → Rajiv Chowk): FAILS
✗ All journey planning functionality is broken

Design Analysis (What Was Attempted):
✓ Correct approach to identify starting and ending lines:
  - Uses next() with generator to find lines for source/destination
  - starting_line = next((ln for ln, data in stations_map.items() if any(s['station'] == source for s in data)), None)
✓ Interchange delay properly defined (3 minutes)
  - INTERCHANGE_DELAY = 3
✓ Logic for calculating time to interchange station exists
  - time_to_transfer = get_time_between(starting_line, source, interchange_station, stations_map)
✓ Logic for calculating time from interchange to destination exists
  - time_from_transfer = get_time_between(ending_line, interchange_station, destination, stations_map)
✓ Proper handling architecture for same-line vs interchange journeys
  - if starting_line == ending_line: (direct route)
  - else: (interchange route)
✓ Next metro calculation integrated into journey planning
  - next_metro_min = calculate_next_metro_time(starting_line, source, start_time, stations_map)
✓ Final arrival time calculation logic is sound
  - final_arrival_min = departure_from_transfer + time_from_transfer

The Algorithm Design is Sound:
The student clearly understood the requirements and designed a correct
algorithm. The implementation shows good planning with:
- Proper function decomposition
- Correct data flow
- Appropriate use of helper functions
- Sound mathematical logic for time calculations

However, One Line of Code Breaks Everything:
Line 120: if starting_line or not ending_line:

This evaluates to True whenever starting_line exists (which is almost always),
causing the error message to trigger incorrectly. Should be:
if not starting_line or not ending_line:

This is a critical failure that demonstrates lack of testing.

SCORE: 0/25
Assessment: Complete failure due to critical bug, despite good algorithm design

MARKS DEDUCTED:
- Non-functional journey planner: -25 marks
  (Even though design is good, functionality is completely broken)


4. CODE QUALITY (15 marks)
--------------------------
Strengths:
✓ Good modular structure with separate functions
  - metro_data(): Data loading
  - get_time_from_start(): Station timing calculation
  - get_time_between(): Travel time calculation
  - calculate_next_metro_time(): Train timing
  - plan_journey(): Route planning
✓ Functions have clear, descriptive names
✓ Reasonable error handling with try-except in metro_data()
✓ Constants used appropriately
  - INTERCHANGE_DELAY = 3
  - DATA_FILE = "metro_data.txt"
✓ Code is generally readable
✓ Decent variable naming (time_sum, current_time_min, etc.)
✓ Proper use of dictionaries for data structures

Weaknesses:
✗ Critical logic error that should have been caught through testing (-3 marks)
  - Indicates code was not tested with actual use cases
  - Basic test would have revealed the issue immediately
✗ No input validation for station names (-1 mark)
  - No check if station exists before processing
  - User gets generic error instead of helpful message
✗ Bare except clause in metro_data() (line 41) - bad practice (-1 mark)
  - Should catch specific exceptions
  - Makes debugging difficult
  - Could hide important errors
✗ Limited error messages and debugging information
  - "Error: Could not load metro data" doesn't explain what went wrong
✗ No comments explaining complex logic sections
  - Functions like get_time_between() could use explanation
  - Algorithm logic not documented
✗ Code style issue: spacing in line 58
  - "stations_map .get" (space before dot)

SCORE: 10/15
Assessment: Basic code quality present, but critical lack of testing and validation

MARKS DEDUCTED:
- Critical untested bug: -3 marks
- Missing input validation: -1 mark
- Bare except clause: -1 mark


5. DOCUMENTATION (10 marks)
---------------------------
✓ README.md file provided
✓ Clear project description
  - "Metro Route and Schedule Simulator"
  - Explains Blue Line and Magenta Line implementation
✓ Instructions to run the program included
  - File setup requirements
  - Launch commands
  - Expected output description
✓ Data sources documented
  - Official DMRC website cited
  - Data collection methodology explained
✓ Logic and assumptions clearly explained:
  - Service hours: 06:00 AM to 11:00 PM
  - Peak hours: 8-10 AM and 5-7 PM (4 min frequency)
  - Off-peak: 8 min frequency
  - Interchange delay: 3 minutes
✓ File structure requirements specified
  - metro_simulator.py (though actual file is main.py)
  - metro_data.txt

Issues:
✗ File referenced as "metro_simulator.py" in README but actual file is "main.py" (-1 mark)
  - Inconsistency could confuse users
  - Instructions won't work as written
- Could include troubleshooting section
- No mention of expected output format examples
- No known issues/limitations section (would be valuable given the bug)

SCORE: 9/10
Assessment: Comprehensive documentation with minor inconsistency

MARKS DEDUCTED:
- Filename mismatch in documentation: -1 mark


6. ENHANCEMENTS/BONUS (20 marks)
--------------------------------
✗ No fare calculation implemented
✗ Only 2 lines implemented (Blue and Magenta) - exactly as required
✗ No additional lines beyond the base requirement
✗ No advanced features added
✗ No extensions attempted

Observations:
- Focus was on completing the base requirements
- No attempt at bonus features
- Given the critical bug in base functionality, attempting bonus features
  would not have been advisable anyway

SCORE: 0/20
Assessment: No bonus features attempted


===============================================================================
                            FINAL ASSESSMENT
===============================================================================

Regular Marks Breakdown:
------------------------
Data Collection:        20/20  ✓ Excellent
Schedule Logic:         28/30  ✓ Very Good (minor formatting issue)
Journey Planner:         0/25  ✗ Non-functional (critical bug)
Code Quality:           10/15  ⚠ Adequate (lack of testing)
Documentation:           9/10  ✓ Very Good (minor inconsistency)
------------------------
TOTAL:                  67/100

Bonus Marks:             0/20  (No bonus features)

GRAND TOTAL:            67/100


DETAILED MARKS DEDUCTION SUMMARY:
---------------------------------
Schedule Logic: -2 marks
  • Time formatting without leading zeros (-2)

Journey Planner: -25 marks
  • Complete non-functionality due to line 120 bug (-25)

Code Quality: -5 marks
  • Critical untested bug (-3)
  • Missing input validation (-1)
  • Bare except clause (-1)

Documentation: -1 mark
  • Filename inconsistency in README (-1)

Bonus: -20 marks
  • No bonus features attempted (-20)

TOTAL DEDUCTIONS: 33 marks


OVERALL ASSESSMENT:
-------------------
This submission demonstrates good understanding of the problem and shows
promise in algorithm design. The data collection is excellent, and the
schedule logic works well. However, a single-line logic error completely
breaks the journey planner functionality, which is a core requirement.

Key Issues:
- Critical logic bug on line 120 (if starting_line or not ending_line:)
- Lack of testing - even basic manual testing would have caught this
- No unit tests or validation

What Worked Well:
+ Excellent data collection (20/20)
+ Good schedule logic with minor issues (28/30)
+ Clear documentation (9/10)
+ Sound algorithm design
+ Good code structure

What Needs Improvement:
- TESTING! The code was clearly not tested before submission
- Input validation and error handling
- Code review practices
- Time formatting with leading zeros
- Consistency between code and documentation

Learning Points:
1. Always test your code with real inputs before submission
2. Use descriptive variable names even in conditions
3. Add comments to explain complex logic
4. Validate all user inputs
5. Use specific exception handling instead of bare except

If the single bug on line 120 were fixed:
  if not starting_line or not ending_line:
The journey planner would likely work correctly and the score would increase
to approximately 92/100 (67 + 25).

RECOMMENDATION: The student has good foundational skills but needs to develop
stronger testing and validation habits. The algorithm design shows promise.

===============================================================================
                                  END OF EVALUATION
===============================================================================
